<div class="container">
    <input type="checkbox" [checked]="showForm" id="create_role_modal" class="modal-toggle">
    <dialog id="create_role_modal" class="modal">
    <div class="modal-box w-11/12 max-w-5xl">
        <div class="flex flex-col w-full lg:flex-row">
            <div class="flow">
                <h3 class="font-bold text-lg">Edit Role</h3>
                <form (ngSubmit)="editRole()" [formGroup]="editRoleForm" class="join join-vertical flex flex-col justify-center gap-4 px-2 pt-4">
                    <fieldset disabled>
                        <label class="input input-bordered flex items-center gap-2">
                            Rolename
                            <input id="name" [disabled]="true" formControlName="name" type="text" class="grow" placeholder="Role Name" />
                            <div class="error" *ngIf="editRoleForm.controls['name'].errors as nameError">
                                <div *ngIf="nameError" class="text-red-400">Rolename is required</div>
                            </div>
                        </label>
                    </fieldset>
                    <fieldset disabled>
                        <label class="input input-bordered flex items-center gap-2">
                            Permissions
                            <input id="permissionIds" [disabled]="true" formControlName="permissionIds" type="text" class="grow" placeholder="Permissions" />
                            <div class="error" *ngIf="editRoleForm.controls['permissionIds'].errors as permissionError">
                                <div *ngIf="permissionError" class="text-red-400">Permissions are required</div>
                            </div>
                        </label>
                    </fieldset>                    
                <button [disabled]="!editRoleForm.valid" class="btn join-item rounded-r-full">Update</button>
                </form>
            </div>
            <div class="divider lg:divider-horizontal">|</div> 
            <div class="grid flex-grow h-32 card rounded-box place-items-center">
                <app-permissions-list
                 [permissions]="rolePermissions.permissions"
                 (onSelectPermission)="selectPermission($event)"
                 (onSelectAllPermissions)="selectAllPermissions()"
                 (onDeselectAllPermissions)="deselectAllPermissions()"
                >
                </app-permissions-list>
            </div>
            <div class="modal-action">
                <form method="dialog">
                    <button (click)="closeForm()" class="btn">Close</button>
                </form>
            </div>
        </div>        
    </div>
</dialog>
</div>